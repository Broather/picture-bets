<!doctype html>
<html lang="eng">

    <head>
        <script type="module" src="game_logic.js"></script>
        <meta charset="utf-8">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="style.css">
    </head>

    <body>
        <a href="index.html">main menu</a>
        <div class="center">
            <div class="row">
                <span id="counter"></span>
            </div>
            <svg id="table" viewBox="0 -1 16 18" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="to_left">
                        <!-- TODO: define background color in css and use that instead -->
                        <stop offset="0%" stop-color="white" />
                        <stop offset="100%" stop-color="white" stop-opacity="0" />
                    </linearGradient>
                    <linearGradient id="to_right">
                        <!-- TODO: define background color in css and use that instead -->
                        <stop offset="0%" stop-color="white" stop-opacity="0" />
                        <stop offset="100%" stop-color="white" />
                    </linearGradient>
                </defs>
            </svg>
            <div class="row">
                <button class="big" id="answer">Answer</button>
            </div>
            <div class="row" style="margin-top: 30px;">
                <button class="big" id="next" hidden>Next</button>
            </div>
        </div>
        <div id="modal" class="modal">

            <!-- Modal content -->
            <div class="modal-content">
                <span id="close" class="close">&times;</span>
                <p>Imagine a bunch of chips layed out on the table as you type numbers</p>
            </div>

        </div>
    </body>

    <script type="module">
        import { state, View, set_up, handle_next } from "./game_logic.js"

        addEventListener('load', (event) => {
            document.getElementById("next").onclick = handle_next
            document.documentElement.style.setProperty('--chip_color', sessionStorage.getItem('chip_color'))

            const pb_count = parseInt(sessionStorage.getItem('pb_count'))
            const half = Math.floor(pb_count / 2)
            state.views = [...View.generate_views(half, 1), ...View.generate_views(pb_count - half, 2)]
            set_up()
        })

    </script>

</html>